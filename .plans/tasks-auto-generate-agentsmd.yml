feature: auto-generate-agentsmd
prd: ./prd-auto-generate-agentsmd.md
created_at: 2026-01-30T08:20:56.167Z
updated_at: 2026-01-30T08:20:56.167Z

tasks:
  - id: task-001
    title: "Add agents-md command to CLI"
    description: |
      Extend Commander.js CLI with new `hone agents-md` command that works without requiring `hone init`. Configure command structure and basic option parsing following existing patterns in index.ts.
    status: completed
    dependencies: []
    acceptance_criteria:
      - "Command `hone agents-md` available from CLI"
      - "Command works without prior initialization"
      - "Follows existing CLI patterns in codebase"
      - "Basic help text displays correctly"
      - "Command structure ready for implementation"
    completed_at: 2026-01-30T10:46:32.000Z

  - id: task-002
    title: "Create agents-md generator core module"
    description: |
      Create new TypeScript module for AGENTS.md generation logic. Set up main function that accepts project path and returns generated content, following existing module patterns from prd-generator.ts.
    status: completed
    dependencies:
      - task-001
    acceptance_criteria:
      - "Core generator module created with proper TypeScript types"
      - "Main generation function accepts project path parameter"
      - "Module follows existing codebase patterns"
      - "Proper error handling structure in place"
      - "Export structure ready for CLI integration"
    completed_at: 2026-01-30T16:22:15.000Z

  - id: task-003
    title: "Design agent prompts for project discovery"
    description: |
      Create comprehensive prompts that instruct agents to analyze codebases for tech stack, dependencies, build systems, testing frameworks, and architectural patterns. Use existing agent patterns from prd-generator.ts for consistency.
    status: completed
    dependencies:
      - task-002
    acceptance_criteria:
      - "Language detection prompts created for major languages"
      - "Build system discovery prompts for Maven, Gradle, npm, etc."
      - "Testing framework detection prompts created"
      - "Architecture analysis prompts designed"
      - "Prompts follow existing agent communication patterns"
    completed_at: 2026-01-30T17:15:26.000Z

  - id: task-003-1
    title: "Fix so running tests don't delete AGENTS.md"
    description: |
      Running the tests in this project should not delete AGENTS.md file, which it currently does. This issue needs to be addressed to ensure the integrity of the documentation.
    status: completed
    dependencies:
      - task-002
    acceptance_criteria:
      - "AGENTS.md file is not deleted during tests"
    completed_at: 2026-01-30T17:30:45.000Z

  - id: task-004
    title: "Implement agent-based project scanning"
    description: |
      Build scanning system that uses existing AgentClient to execute discovery prompts against codebase. Implement parallel scanning for different aspects (languages, build systems, tests) to stay within 90-second execution time limit.
    status: completed
    dependencies:
      - task-003
    acceptance_criteria:
      - "Agent client integration for project scanning implemented"
      - "Parallel scanning system for different discovery areas"
      - "Execution completes within 90-second limit for typical projects"
      - "Proper error handling for agent communication failures"
      - "Results aggregation from multiple agent calls"
    completed_at: 2026-01-30T18:45:30.000Z

  - id: task-005
    title: "Build AGENTS.md template system"
    description: |
      Create adaptive template system that generates AGENTS.md format based on discovered tech stack. Include logic for 100-line limit enforcement and .agents-docs/ subdirectory creation for detailed information.
    status: completed
    dependencies:
      - task-004
    acceptance_criteria:
      - "Template system adapts based on discovered tech stack"
      - "100-line limit enforcement implemented"
      - "Logic for creating .agents-docs/ subdirectory with topic files"
      - "Relative path references from main AGENTS.md to subfiles"
      - "Template covers build, test, deploy, and architecture sections"
    completed_at: 2026-01-30T19:32:15.000Z

  - id: task-006
    title: "Implement existing file handling logic"
    description: |
      Add logic to detect existing AGENTS.md files and handle overwrite behavior.
      Implement decision logic for when to create .agents-docs/ subdirectory files versus keeping everything in main file.
      Keep any gotchas that already exist in the AGENTS.md
    status: completed
    dependencies:
      - task-005
    acceptance_criteria:
      - "Detection of existing AGENTS.md files implemented"
      - "Overwrite behavior configured as per requirements"
      - "Decision logic for .agents-docs/ subdirectory creation"
      - "Handling of existing .agents-docs/ directory and files"
      - "Proper file system operations with error handling"
      - "Keep any gotchas that already exist in the AGENTS.md"
    completed_at: 2026-01-30T11:30:00.000Z

  - id: task-007
    title: "Add output formatting and feedback system"
    description: |
      Implement success/error feedback system using existing logger patterns. Add verbose output control and clear progress indication during agent scanning operations.
    status: completed
    dependencies:
      - task-006
    acceptance_criteria:
      - "Success/error feedback implemented using existing logger"
      - "Verbose output control integrated with global --verbose flag"
      - "Progress indication during scanning operations"
      - "Clear messaging about file creation and updates"
      - "Consistent output formatting with existing commands"
    completed_at: 2026-01-30T20:15:00.000Z

  - id: task-008
    title: "Wire command implementation to CLI"
    description: |
      Connect the agents-md generator module to the CLI command. Implement proper async handling, error catching, and integration with existing command patterns from index.ts.
    status: completed
    dependencies:
      - task-007
    acceptance_criteria:
      - "CLI command properly invokes generator module"
      - "Async handling matches existing command patterns"
      - "Error catching and user-friendly error messages"
      - "Integration with global CLI options (verbose, etc.)"
      - "Command executes successfully from any directory"
    completed_at: 2026-01-30T20:45:00.000Z

  - id: task-009
    title: "Add comprehensive test coverage"
    description: |
      Create unit and integration tests for agents-md functionality. Test agent prompt execution, template generation, file handling, and CLI integration following existing test patterns in codebase.
    status: cancelled
    dependencies:
      - task-008
    acceptance_criteria:
      - "Unit tests for core generator module functions"
      - "Integration tests for agent communication"
      - "Tests for template system and file operations"
      - "CLI integration tests following existing patterns"
      - "Error scenario testing for robustness"
    completed_at: null

  - id: task-010
    title: "Optimize performance and validate requirements"
    description: |
      Performance testing to ensure 90-second execution limit compliance. Validate all functional requirements are met including language support, build system detection, and output formatting standards.
    status: cancelled
    dependencies:
      - task-009
    acceptance_criteria:
      - "Execution time validated under 90 seconds for typical projects"
      - "All language detection requirements verified"
      - "Build system and testing framework discovery validated"
      - "100-line limit and .agents-docs/ subdirectory logic confirmed"
      - "Cross-platform compatibility verified"
    completed_at: null

  - id: task-011
    title: "improve output written to AGENTS.md"
    description: |
      The AGENTS.ms file now has a bunch of:
        Based on my exploration of the project structure here's...
        Based on my architectural analysis, here's the comprehensive overview...

        these are not helpful for future agents.
        Provide a very concise (1-2 sentences) and informative summary of each section before inserting the link to the file that har more info.
    status: completed
    dependencies:
    acceptance_criteria:
      - "AGENTS.md output improved to be concise and informative"
      - "Based on my ... are gone from AGENTS.md"
    completed_at: 2026-01-30T20:15:30.000Z

  - id: task-012
    title: "improve output written to AGENTS.md, even more"
    description: |
      The AGENTS.ms file now has a bunch of:
        Based on my exploration of the project structure here's...
        Based on my architectural analysis, here's the comprehensive overview...
        Based on my comprehensive analysis of the hone-ai project, here's the architectural assessment...

        these are not helpful for future agents.
        Provide a very concise (1-2 sentences) and informative summary of each section before inserting the link to the file that har more info.

        In task-011, we tried to make some improvements to the AGENTS.md file, but the above unhelpful statements are still there.
        They should be replaced with a short summary of each section before inserting the link to the file that has more info.
    status: completed
    dependencies:
    acceptance_criteria:
      - "AGENTS.md output improved to be concise and informative"
      - "When linking to files, provide a very concise (1-2 sentences) and informative summary of each section before inserting the link to the file that has more info."
    completed_at: 2026-01-30T13:02:12.000Z

  - id: task-013
    title: "verify that agents-md command uses agent in config file, if it exists"
    description: |
      At the moment it looks like the agents-md command is not using the agent in the config file.
      We need to ensure that the command is using the agent in the config file, if the files exists.
      If the config file doesn't exist, we should use the default agent.
      We also should add a model configuration to the command in the config file, like we have for the other steps/commands like prd, review etc.
    status: completed
    dependencies:
    acceptance_criteria:
      - "agents-md command uses agent in config file"
      - "model configuration added to agents-md command in config file"
    completed_at: 2026-01-30T21:15:00.000Z

  - id: task-014
    title: "rename .agents/ folder to .agents-docs/"
    description: |
      .agents/ is not ideal. We should rename it to .agents-docs/ to better reflect its purpose.
      No need to be backwards compatible or handle migrations etc. Just rename it.
      But do it in a way to it could be easy make it configurable in the future (via the config file) if needed.
    status: completed
    dependencies:
    acceptance_criteria:
      - "agents-md command should place the agents sub docs on .agents-docs/ rather than .agents/"
      - "README.md and all references in other files and comments are updated"
      - "a central variable/constant defines this to make it easy to change in the future, or potentially configurable via the config file"
    completed_at: 2026-01-30T22:30:15.000Z

  - id: task-015
    title: "timeout might be too tight"
    description: |
      the timeout might be too tight. We should increase it to give the agents more time to complete their tasks.
      I get this error from time to time.
      ---
      ✗ Error: opencode agent timed out

      The opencode agent did not respond within 120 seconds.

      This may indicate:
        • Network connectivity issues
        • Agent server overload
        • Very large or complex request

      Try:
        • Simplifying your request
        • Checking your internet connection
        • Retrying in a few minutes
      ---
    status: completed
    dependencies:
    acceptance_criteria:
      - "increase timeout to 300 seconds"
    completed_at: 2026-01-30T22:45:00.000Z

  - id: task-016
    title: "don't create config file when running agents-md"
    description: |
      it seems like a config file is created when running agents-md. We should not create it via this command.
      if there's no config file, we can rely on the --agent flag to specify the agent to use, and default to claude (the whole system should default to claude)
    status: completed
    dependencies:
    acceptance_criteria:
      - "no .plans/ dir or .plans/hone.config.yml file is created when running agents-md command"
      - "default to claude agent when no config file is present, but centralize this default in a central variable/constant and use it in other places as well"
    completed_at: 2026-01-30T22:59:00.000Z
